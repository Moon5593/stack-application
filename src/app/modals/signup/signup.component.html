<ion-header class="ion-no-border">
  <ion-toolbar>
    <ion-title>Signup</ion-title>
    <ion-buttons slot="primary">
      <ion-button (click)="onCancel()">
        <ion-icon name="close"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-no-padding">
  <ion-grid class="ion-no-padding" style="height: 100%;">
    <ion-row style="height: 100%;">
      <ion-col size="12" class="ion-padding">
        <form [formGroup]="form">
          <ion-grid>
            <ion-row>
              <ion-col size="12">
                <ion-item>
                  <ion-label position="stacked">Username</ion-label>
                  <ion-input type="text" formControlName="username">
                    <ion-icon name="person"></ion-icon>
                  </ion-input>
                </ion-item>
              </ion-col>
            </ion-row>

            <ion-row>
              <ion-col size="12">
                <ion-item>
                  <ion-label position="stacked">E-mail</ion-label>
                  <ion-input type="email" formControlName="email">
                    <ion-icon name="mail"></ion-icon>
                  </ion-input>
                </ion-item>
              </ion-col>
            </ion-row>

            <ion-row>
              <ion-col size="12">
                <app-image-picker [showPreview]="form.get('image').value" (imagePick)="onImagePicked($event)" [signupMode]="true"></app-image-picker>
              </ion-col>
            </ion-row>

            <ion-row>
              <ion-col size="12">
                <ion-item>
                  <ion-label position="stacked">Password</ion-label>
                  <ion-input type="password" formControlName="password">
                    <ion-icon name="lock-open"></ion-icon>
                  </ion-input>
                </ion-item>
              </ion-col>
            </ion-row>

            <ion-row>
              <ion-col size="12">
                <ion-item>
                  <ion-label position="stacked">Confirm Password</ion-label>
                  <ion-input type="password" formControlName="c_password">
                    <ion-icon name="lock-closed"></ion-icon>
                  </ion-input>
                </ion-item>
              </ion-col>
            </ion-row>
            <ion-row *ngIf="form.get('c_password').touched && (form.get('c_password')?.errors || form.errors?.mismatch)">
              <ion-col size="12">
                <p>Passwords don't match.</p>
              </ion-col>
            </ion-row>

            <ion-row>
              <ion-col size="12">
                <ion-item lines="none" class="ion-margin-top">
                  <ion-text>By registering, you agree to the Terms of Service and Privacy Policy .</ion-text>
                  <ion-checkbox class="ion-no-margin ion-margin-end" slot="start" formControlName="checkbox"></ion-checkbox>
                </ion-item>
              </ion-col>
            </ion-row>
          </ion-grid>
        </form>
      </ion-col>
      <ion-col size="2"></ion-col>
      <ion-col size="8" class="ion-text-center">
        <ion-button expand="full" [disabled]="!form.valid" (click)="onCreateUser()">Signup</ion-button>
      </ion-col>
    </ion-row>

  </ion-grid>

</ion-content>
